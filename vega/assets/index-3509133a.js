(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}})();class S{constructor(e,o,r,i){this.x=e,this.y=o,this.radius=r,this.color=i}draw(){s.beginPath(),s.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),s.fillStyle=this.color,s.fill()}}class I{constructor(e,o,r,i,a){this.x=e,this.y=o,this.radius=r,this.color=i,this.velocity=a}draw(){s.beginPath(),s.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),s.fillStyle=this.color,s.fill()}update(){this.draw(),this.x+=this.velocity.x,this.y+=this.velocity.y}}class q{constructor(e,o,r,i,a){this.x=e,this.y=o,this.radius=r,this.color=i,this.velocity=a}draw(){s.beginPath(),s.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),s.fillStyle=this.color,s.fill()}update(){this.draw(),this.x+=this.velocity.x,this.y+=this.velocity.y}}class T{constructor(e,o,r,i,a){this.x=e,this.y=o,this.radius=r,this.color=i,this.velocity=a,this.alpha=1}draw(){s.save(),s.globalAlpha=this.alpha,s.beginPath(),s.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),s.fillStyle=this.color,s.fill(),s.restore()}update(){this.draw(),this.velocity.x*=E,this.velocity.y*=E,this.x+=this.velocity.x,this.y+=this.velocity.y,this.alpha-=N}}let g=!0;const l=document.querySelector("canvas"),s=l.getContext("2d");l.width=innerWidth;l.height=innerHeight;const O=document.querySelector("#scoreEl"),A=document.querySelector("#modalEl"),G=document.querySelector("#modalScoreEl");let m=0;const d=l.width/2,u=l.height/2;let p=new S(d,u,15,"white"),c=[];const F=5,M=5;let f=[];const x=1,H=1100;let y=[];const E=.99,N=.012;let n=null;document.querySelector("#startGameEl").addEventListener("click",t=>{t.stopPropagation(),R(),b(),Y(),A.style.display="none",new Audio("./music/startGame.mp3").play()});function R(){p=new S(d,u,15,"white"),c=[],f=[],y=[],m=0,v(0),clearInterval(C),g=!1,n||(n=document.createElement("audio"),n.setAttribute("src","./music/backgroundMusic.mp3"),n.setAttribute("autoplay","autoplay"),n.volume=.7,n.play(),n.addEventListener("ended",function(){this.currentTime=0,this.play()},!1))}function X(){new Audio("./music/endGame.mp3").play(),g=!0,cancelAnimationFrame(L),G.innerHTML=m,A.style.display="flex"}let C;function Y(){C=setInterval(()=>{const t=Math.random()*20+10;let e=0,o=0;Math.random()<.5?(e=Math.random()<.5?0-t:l.width+t,o=Math.random()*l.height):(e=Math.random()*l.width,o=Math.random()<.5?0-t:l.height+t);const r=`hsl(${Math.random()*360}, 50%, 50%)`,i=Math.atan2(u-o,d-e),a={x:Math.cos(i)*x,y:Math.sin(i)*x};f.push(new q(e,o,t,r,a))},H)}function v(t){m+=t,O.innerHTML=m}function P(t,e){return Math.hypot(t.x-e.x,t.y-e.y)-e.radius<t.radius}let L;function b(){L=requestAnimationFrame(b),s.fillStyle="rgba(0, 0, 0, 0.1)",s.fillRect(0,0,l.width,l.height),p.draw(),y.forEach((t,e)=>{t.alpha>0?t.update():y.splice(e,1)}),c.forEach((t,e)=>{t.update(),(t.x+t.radius<0||t.y+t.radius<0||t.x-t.radius>l.width||t.y-t.radius>l.height)&&setTimeout(()=>{c.splice(e,1)},0)}),f.forEach((t,e)=>{t.update(),P(p,t)&&X(),c.forEach((r,i)=>{if(P(r,t)){const h=t.radius*2;for(let w=0;w<h;w++)y.push(new T(r.x,r.y,Math.random()*3,t.color,{x:(Math.random()-.5)*(Math.random()*6),y:(Math.random()-.5)*(Math.random()*6)}));t.radius-10>9?(gsap.to(t,{radius:t.radius-10}),setTimeout(()=>{c.splice(i,1)},0),new Audio("./music/enemyHit.mp3").play(),v(100)):(setTimeout(()=>{f.splice(e,1),c.splice(i,1),new Audio("./music/enemyEliminated.mp3").play()},0),v(250))}})})}addEventListener("click",t=>{if(g)return;const e=Math.atan2(t.clientY-u,t.clientX-d),o={x:Math.cos(e)*M,y:Math.sin(e)*M};c.push(new I(d,u,F,"white",o)),new Audio("./music/shoot.mp3").play()});
